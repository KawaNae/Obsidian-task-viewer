/* ========================================================================== */
/* Design Tokens */
/* - :root => theme-independent constants (layout/size/z-index) */
/* - body  => single-layer tv tokens mapped from Obsidian theme vars */
/* ========================================================================== */

:root {
    /* Layout */
    --hour-height: 60px;
    --time-axis-width: 30px;
    --header-height: 30px;
    --allday-min-height: 40px;

    /* Task Card */
    --task-card-padding: 0.8em 2px 4px 8px;
    --task-card-border-radius: 4px;

    --task-card-accent-solid-width: 4px;
    
    --task-card-accent-dashed-width: 4px;
    --task-card-accent-dashed-line: 9px;
    --task-card-accent-dashed-gap: 10px;

    --task-card-accent-dotted-width: 4px;
    --task-card-accent-dotted-line: 4px;
    --task-card-accent-dotted-gap: 4px;

    --task-card-accent-double-left-width: 1px;
    --task-card-accent-double-right-width: 1px;
    --task-card-accent-double-gap: 2px;

    --task-card-accent-dashdotted-width: 4px;
    --task-card-accent-dashdotted-line1: 9px;
    --task-card-accent-dashdotted-gap1: 6px;
    --task-card-accent-dashdotted-line2: 4px;
    --task-card-accent-dashdotted-gap2: 6px;

    --task-card-font-size: 0.9em;
    --task-card-gap: 5px;

    /* Indentation */
    --list-indent-top: 1.9em;
    --list-indent-nested: 1.5em;

    /* Handles */
    --handle-size: 24px;
    --handle-offset: -12px;
    --handle-border-radius: 4px;

    /* Spacing */
    --toolbar-padding: 8px;
    --toolbar-gap: 8px;

    /* Z-Index Layers */
    --z-negative: -1;
    --z-base: 0;
    --z-task-card: 1;
    --z-current-time-indicator: 15;
    --z-task-card-handle: 20;
    --z-task-card-allday: 25;
    --z-allday-cell-drag-over: 50;
    --z-timer-widget: 65;
    --z-task-card-allday-handle: 100;
    --z-task-card-future-handle: 100;
    --z-task-card-selected: 200;
    --z-overlay: 1000;
    --z-task-card-drag-ghost: 9999;
    --z-ghost-factory: 2147483647;
}

body {
    /* Base tokens from Obsidian */
    --tv-bg-primary: var(--background-primary);
    --tv-bg-secondary: var(--background-secondary);
    --tv-bg-secondary-alt: var(--background-secondary-alt);
    --tv-bg-hover: var(--background-modifier-hover);
    --tv-bg-input: var(--background-modifier-form-field);

    --tv-interactive-normal: var(--interactive-normal);

    --tv-border: var(--background-modifier-border);
    --tv-border-error: var(--background-modifier-error);

    --tv-text: var(--text-normal);
    --tv-text-muted: var(--text-muted);
    --tv-text-faint: var(--text-faint);
    --tv-text-accent: var(--text-accent);
    --tv-text-on-accent: var(--text-on-accent);
    --tv-text-danger: var(--text-error);
    --tv-text-warning: var(--text-warning, var(--text-accent));
    --tv-text-success: var(--text-success, var(--color-green));

    --tv-link: var(--link-color);
    --tv-link-hover: var(--link-color-hover);

    --tv-accent: var(--interactive-accent);
    --tv-accent-hover: var(--interactive-accent-hover);
    --tv-accent-rgb: var(--interactive-accent-rgb);

    --tv-danger-rgb: var(--background-modifier-error-rgb, var(--color-red-rgb));

    --tv-font-mono: var(--font-monospace);
    --tv-font-ui: var(--font-interface);
    --tv-radius-s: var(--radius-s);

    /* Role tokens */
    --tv-bg-habits: var(--tv-bg-primary);
    --tv-bg-allday: var(--tv-bg-primary);
    --tv-bg-timeline: var(--tv-bg-primary);

    --tv-bg-axis: var(--tv-bg-secondary);
    --tv-bg-date-header: var(--tv-bg-secondary);

    --tv-bg-deadline-list: var(--tv-bg-secondary);

    --tv-bg-card: var(--tv-bg-secondary);
    --tv-bg-task-handle: var(--tv-bg-primary);
    --tv-bg-task-handle-hover: var(--tv-bg-secondary);

    --tv-bg-widget: var(--tv-bg-primary);
    --tv-bg-widget-header: var(--tv-bg-primary);
    --tv-bg-pomodoro-start: var(--tv-bg-primary);
    --tv-bg-pomodoro-end: var(--tv-bg-secondary);

    --tv-bg-schedule-main: var(--tv-bg-primary);

    --tv-shadow-rgb: var(--mono-rgb-100);
    --tv-shadow-a-card: 0.25;
    --tv-shadow-a-strong: 0.3;
    --tv-shadow-a-medium: 0.2;
    --tv-shadow-a-light: 0.15;

    --tv-shadow-card: rgba(var(--tv-shadow-rgb), var(--tv-shadow-a-card));
    --tv-shadow-strong: rgba(var(--tv-shadow-rgb), var(--tv-shadow-a-strong));
    --tv-shadow-medium: rgba(var(--tv-shadow-rgb), var(--tv-shadow-a-medium));
    --tv-shadow-light: rgba(var(--tv-shadow-rgb), var(--tv-shadow-a-light));

    --tv-danger-bg-subtle: rgba(var(--tv-danger-rgb), 0.1);
    --tv-danger-bg-soft: rgba(var(--tv-danger-rgb), 0.2);
    --tv-danger-bg-soft-hover: rgba(var(--tv-danger-rgb), 0.3);

    --tv-checkbox-marker: var(--checkbox-marker-color);
    --tv-checkbox-done-bg: var(--checklist-done-color);
    --tv-checkbox-question: var(--tv-text-warning);
    --tv-checkbox-important: var(--tv-text-danger);

    --tv-drop-outline: var(--tv-accent);
    --tv-drop-glow-strong: rgba(var(--tv-accent-rgb), 0.3);
    --tv-drop-glow-light: rgba(var(--tv-accent-rgb), 0.2);

    --tv-ghost-shadow: var(--tv-shadow-strong);
}

body.theme-light {
    --tv-bg-card: var(--tv-bg-primary);
    --tv-shadow-rgb: var(--mono-rgb-100);
    --tv-shadow-a-card: 0.16;
    --tv-shadow-a-strong: 0.1;
    --tv-shadow-a-medium: 0.08;
    --tv-shadow-a-light: 0.05;
}

body.theme-dark {
    --tv-bg-card: var(--tv-border);
    --tv-shadow-rgb: var(--mono-rgb-0);
    --tv-shadow-a-card: 0.35;
    --tv-shadow-a-strong: 0.4;
    --tv-shadow-a-medium: 0.28;
    --tv-shadow-a-light: 0.22;
}
